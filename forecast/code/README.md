# Organization and manifest of code folder

*All figures in the manuscript and supplement are generated by knitting 
`/paper/supplement.Rmd`.*

## Required `R` packages

```r
install.packages("devtools")
install.packages("parallel")
install.packages(c("scales", "cowplot", "lubridate", "tidyverse")
install.packages(c("here", "future", "furrr", "progressr"))
install.packages("covidcast")

remotes::install_github("cmu-delphi/covidcast", ref = "main", subdir = "R-packages/evalcast")
```

## `download_signals/`

For the purposes of (re)running our analysis, we download all the signals beforehand
and run the models from those rather than grabbing the data from the API.

1. `download_signals.R` -- grabs all necessary as of data and puts it into  `data/offline_signals/`

## `qr_forecast/`

Reruns all "forecasts" using quantile regression 

1. `quantgen.R` -- quantile regression forecaster (uses `{ryantibs/quantgen}`) for use with `{evalcast}`
1. `train_baseline.R` -- runs the baseline AR(3) model and saves results
1. `train_signals.R` -- runs all models with signals and saves results
1. `evaluate_predictions.R` -- scores the forecasts against actuals and saves the results


## `figures/`

Any source scripts referenced by `/paper/supplement.Rmd`. Uses processed data.

1. `ccf-dv-finalized.R` -- Supplemental figure
1. `eval_funs.R` -- Simple utility functions and plotting colors
1. `hotspot_funs.R` -- AUC and ROC functions
1. `results_processing_and_plotting.R` -- Clean up and modify the forecasts/hotspots. Common plotter functions.
1. `revisions.R` -- Revisions figure in the manuscript (DV and Cases)
1. `trajectory.R` -- Trajectory figure in the manuscript (NY)

## `deprecated/`

Scripts for figures or analyses no longer used (To Be Deleted)
